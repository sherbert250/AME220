<html>
<head>
<title>
  Image Resizer
</title>
<style>
  #imagePreview{
      height: 300px;
      width: 300px;
      display: block;
  }
</style>
<script src="jquery-1.11.3.js" type="text/javascript"></script>

<script>
var iosOptions = [];
var androidOptions = [];
iosOptions.push(29);
iosOptions.push(48);
iosOptions.push(57);
iosOptions.push(58);
iosOptions.push(64);
iosOptions.push(72);
iosOptions.push(144);
iosOptions.push(320);
iosOptions.push(1024);
androidOptions.push(0);
androidOptions.push(512);
androidOptions.push(192);
androidOptions.push(144);
androidOptions.push(96);
androidOptions.push(72);
androidOptions.push(48);
androidOptions.push(36);
var MAX_WIDTH = 100;
var MAX_HEIGHT = 100;
var imageUploaded = function(index)
{
   var file = $('#uploadImage').get(0);
   if(file.files[0].type.split("/")[0].toLowerCase() != "image"){
        alert("Incorrect file type -- Please ensure you are uploading an image file.");
        return;
   }
   if ( file.files && file.files[0] && file.files[0].type.split("/")[0].toLowerCase() === "image") {
        var FR = new FileReader();
        FR.onload = function(e) {
            var data = e.target.result;
            var canvas = document.createElement("canvas");
            var img = document.createElement("img");
            img.onload= function(){
                 var width = img.width;
                 var height = img.height;
                 var w2 = width;
                 var h2 = height;

                 if (width > height) {
                     if (width > MAX_WIDTH) {
                        h2 = height * MAX_WIDTH / width;
                        w2 = MAX_WIDTH;
                    }
                 } else {
                     if (height > MAX_HEIGHT) {
                        w2 = width * MAX_HEIGHT / height;
                        h2 = MAX_HEIGHT;
                    }
                }
                canvas.width = w2;
                canvas.height = h2;
                var ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0, w2, h2);
                var base64St = canvas.toDataURL("image/png");
                document.getElementById("imagePreview" + index.toString()).src = base64St;

            }
            img.src = data;
        };
        FR.readAsDataURL( file.files[0] );
   }
}

var selectChanged = function(){
  for(var i = 0; i < iosOptions.length; i++) {
    MAX_WIDTH = MAX_HEIGHT = parseInt(iosOptions[i]);
    imageUploaded(i);
    document.getElementById("imagePreview" + i.toString()).style.height = MAX_HEIGHT + "px";
    document.getElementById("imagePreview" + i.toString()).style.width= MAX_WIDTH + "px";
  }
  for(var i = 1; i <= androidOptions.length; i++) {
    MAX_WIDTH = MAX_HEIGHT = parseInt(androidOptions[i]);
    imageUploaded(-i);
    document.getElementById("imagePreview" + -i.toString()).style.height = MAX_HEIGHT + "px";
    document.getElementById("imagePreview" + -i.toString()).style.width= MAX_WIDTH + "px";
  }
}

</script>

</head>

<body>
<!-- <select id='theSelect' onchange='selectChanged()'>
    <option disabled> iOS </option>
    <option value='57'> 57px </option>
    <option value='72'> 72px </option>
    <option value='144'> 144px </option>
    <option value='1024'> 1024px </option>
    <option value='29'> 29px </option>
    <option value='48'> 48px </option>
    <option value='58'> 58px </option>
    <option value='64'> 64px </option>
    <option value='320'> 320px </option>
    <option disabled> Android </option>
    <option value='192'> 192px </option>
    <option value='144'> 144px </option>
    <option value='96'> 96px </option>
    <option value='72'> 72px </option>
    <option value='48'> 48px </option>
    <option value='36'> 36px </option>
    <option value='512'> 512px </option>
</select> -->
  <input type="file" name="uploadImage" id="uploadImage" onchange="selectChanged()">
  <div>
    <p>
      android
    </p>
    <img id="imagePreview-7">
    <img id="imagePreview-6">
    <img id="imagePreview-5">
    <img id="imagePreview-4">
    <img id="imagePreview-3">
    <img id="imagePreview-2">
    <img id="imagePreview-1">
  </div>
  <div>
    <p>
      ios
    </p>
    <img id="imagePreview0">
    <img id="imagePreview1">
    <img id="imagePreview2">
    <img id="imagePreview3">
    <img id="imagePreview4">
    <img id="imagePreview5">
    <img id="imagePreview6">
    <img id="imagePreview7">
    <img id="imagePreview8">
  </div>
</body>


</html>
